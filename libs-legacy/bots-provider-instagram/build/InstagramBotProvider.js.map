{"version":3,"sources":["../src/InstagramBotProvider.ts"],"names":["InstagramBotProvider","client","provider","IgApiClient","eventTypes","config","username","Err","password","state","generateDevice","account","login","simulate","preLoginFlow","Bluebird","delay","postLoginFlow","BaseBotProvider"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;IAUaA,oB;;;;;;;;;;;;;;;UACXC,M;UACAC,Q,GAAW,W;UACXC,W,GAAcA,gC;UACdC,U,GAAa,E;UACbC,M;;;;;;;gGACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,oBAEO,KAAKA,MAAL,CAAYC,QAFnB;AAAA;AAAA;AAAA;;AAAA,sBAEmC,IAAIC,eAAJ,CAAQ,kBAAR,CAFnC;;AAAA;AAAA,oBAGO,KAAKF,MAAL,CAAYG,QAHnB;AAAA;AAAA;AAAA;;AAAA,sBAGmC,IAAID,eAAJ,CAAQ,kBAAR,CAHnC;;AAAA;AAIE,qBAAKN,MAAL,GAAc,IAAI,KAAKE,WAAT,EAAd;;AAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;+FAMA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,oBACO,KAAKF,MADZ;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,+BAGiC,KAAKI,MAHtC,EAGUC,QAHV,gBAGUA,QAHV,EAGoBE,QAHpB,gBAGoBA,QAHpB;AAAA;AAAA,uBAIQ,KAAKP,MAAL,CAAYQ,KAAZ,CAAkBC,cAAlB,CAAiCJ,QAAjC,CAJR;;AAAA;AAAA;AAAA,uBAKQ,KAAKL,MAAL,CAAYU,OAAZ,CAAoBC,KAApB,CAA0BN,QAA1B,EAAoCE,QAApC,CALR;;AAAA;AAAA;AAAA,uBAMQ,KAAKP,MAAL,CAAYY,QAAZ,CAAqBC,YAArB,EANR;;AAAA;AAAA;AAAA,uBAOQC,qBAASC,KAAT,CAAe,CAAf,CAPR;;AAAA;AAAA;AAAA,uBAQQ,KAAKf,MAAL,CAAYY,QAAZ,CAAqBI,aAArB,EARR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;EAZwCC,wB;;;eAwB3BlB,oB","sourcesContent":["import { IgApiClient } from '@buzzguru/instagram-private-api';\nimport BaseBotProvider from '@lskjs/bots-provider';\nimport Err from '@lskjs/err';\nimport Bluebird from 'bluebird';\n\n/**\n * Docs: https://github.com/dilame/instagram-private-api\n */\ntype InstagramBotConfigType = {\n  username: string;\n  password: string;\n};\n\nexport class InstagramBotProvider extends BaseBotProvider {\n  client: any;\n  provider = 'instagram';\n  IgApiClient = IgApiClient;\n  eventTypes = [];\n  config: InstagramBotConfigType;\n  async init() {\n    await super.init();\n    if (!this.config.username) throw new Err('!config.username');\n    if (!this.config.password) throw new Err('!config.password');\n    this.client = new this.IgApiClient();\n  }\n  async run() {\n    if (!this.client) return;\n    await super.run();\n    const { username, password } = this.config;\n    await this.client.state.generateDevice(username);\n    await this.client.account.login(username, password);\n    await this.client.simulate.preLoginFlow();\n    await Bluebird.delay(1);\n    await this.client.simulate.postLoginFlow();\n  }\n}\n\nexport default InstagramBotProvider;\n"],"file":"InstagramBotProvider.js"}